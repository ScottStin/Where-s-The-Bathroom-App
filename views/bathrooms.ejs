
<% layout('layouts/boilerplate') %> 
<div id="map" style="width: 100%; height: 500px"></div> <br>
<h1>Bathrooms Near You</h1>
<!-- <a href="/bathrooms/new">New</a> -->
    <% for (let i of bathrooms){%>
        <div class = "card mb-4 shadow">
            <div class = "row">
                <div class = "col-md-4"> <!--This is saying that, after size medium and above, this will take up 4 units of 12-->
                    <% if(i.images.length != 0){ %> 
                        <img  alt="" class = "img-fluid h-100" src="<%=i.images[0].url%>">
                    <% } else{ %> 
                        <img  alt="" class = "img-fluid" src="https://source.unsplash.com/random/?toilet/480x480">
                    <%}%>
                </div>
                <div class="col-md-8">
                    <div class="card-body">
                        <h5 class="card-title"><%= i.name %> </h5>
                        <p class="card-text"><%= i.description %> </p>
                        <p class="card-text">
                            <small class = "text-muted"><%= i.address %> </small>
                        </p>
                        <a class="btn btn-secondary" href="/bathrooms/<%=i._id%> ">View</a>
                    </div>
                </div>
            </div>
        </div>
    <% } %> 

    <script> 
        mapboxgl.accessToken = '<%-process.env.MAPBOX_TOKEN%>';
        const bathrooms = {features: <%- JSON.stringify(bathrooms) %>}; // here, we're creating an object called features and saving our bathroom data to it, so that it matches our expected data format for the inuput to our mapbox cluster map on our bathrooms.ejs page
    </script>
    <script src="/javascript/clusterMap.js"></script>

   